/**
 * Description : customs.css - UI 패키지 통합 커스텀 CSS 스타일
 * Author : Shiwoo Min
 * Date : 2025-09-17
 * Path : packages/ui/src/styles/customs.css
 */

// Tailwind CSS 지시문
@tailwind base;
@tailwind components;
@tailwind utilities;

/* =================================================================
    Base Layer - 글로벌 기본 스타일
   ================================================================= */

@layer base {
  /* 폰트 및 기본 스타일 설정 */
  html {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  }

  /* 전역 스크롤바 커스터마이징 (웹킷 기반 브라우저) */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-gray-100 dark:bg-gray-800;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-gray-300 dark:bg-gray-600 rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-400 dark:bg-gray-500;
  }
}

/* =================================================================
    Components Layer - 컴포넌트별 스타일
   ================================================================= */

@layer components {
  /* ===== 기본 UI 컴포넌트들 ===== */

  /* 버튼 기본 스타일 */
  .btn-base {
    @apply inline-flex items-center justify-center rounded-lg font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50;
  }

  /* 입력 필드 기본 스타일 */
  .input-base {
    @apply flex w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-700 dark:bg-gray-900 dark:text-white dark:placeholder:text-gray-400;
  }

  /* 기본 카드 스타일 */
  .card-base {
    @apply rounded-lg border border-gray-200 bg-white shadow-sm dark:border-gray-700 dark:bg-gray-900;
  }

  /* 프로젝트 전용 카드 */
  .cw-card {
    @apply rounded-xl border border-gray-200 bg-white p-3 shadow-sm;
  }
  .dark .cw-card {
    @apply border-gray-800 bg-gray-900;
  }

  /* Waterfall: 점선 링크/라벨 (SVG) */
  .cw-wf-link {
    stroke: #d1d5db;
    stroke-width: 1;
    stroke-dasharray: 4 4;
  }
  .cw-wf-label {
    fill: #6b7280;
    font-size: 10px;
    text-anchor: middle;
  }

  /* Funnel: 라벨/값 (SVG) */
  .cw-fn-label {
    fill: #6b7280;
    font-size: 12px;
    text-anchor: middle;
    font-weight: 500;
  }
  .cw-fn-value {
    fill: #111827;
    font-size: 12px;
    text-anchor: middle;
  }

  /* Gauge: 중앙 값 오버레이 */
  .cw-overlay-center {
    @apply -mt-16 text-center pointer-events-none;
  }

  /* Progress: 공용 스킨 */
  .cw-progress {
    width: 100%;
    height: 0.5rem;
    border-radius: 0.375rem;
    background: #e5e7eb;
  }
  .cw-progress::-webkit-progress-bar {
    background: #e5e7eb;
    border-radius: 0.375rem;
  }
  .cw-progress::-webkit-progress-value {
    border-radius: 0.375rem;
    background: #374151;
  }
  .cw-progress.cw-primary::-webkit-progress-value {
    background: #2563eb;
  }
  .cw-progress.cw-ok::-webkit-progress-value {
    background: #10b981;
  }
  .cw-progress.cw-warn::-webkit-progress-value {
    background: #f59e0b;
  }
  .cw-progress.cw-danger::-webkit-progress-value {
    background: #ef4444;
  }
}

/* Firefox progress 채우기 */
.cw-progress::-moz-progress-bar {
  background: #374151;
}
.cw-progress.cw-primary::-moz-progress-bar {
  background: #2563eb;
}
.cw-progress.cw-ok::-moz-progress-bar {
  background: #10b981;
}
.cw-progress.cw-warn::-moz-progress-bar {
  background: #f59e0b;
}
.cw-progress.cw-danger::-moz-progress-bar {
  background: #ef4444;
}

/* =================================================================
    Utilities Layer - 유틸리티 클래스들
   ================================================================= */

@layer utilities {
  /* ===== 애니메이션 유틸리티 ===== */

  .animate-fade-in {
    animation: fadeIn 0.5s ease-in-out;
  }

  .animate-slide-up {
    animation: slideUp 0.3s ease-out;
  }

  .animate-slide-in-right {
    animation: slideInRight 0.3s ease-out;
  }

  .animate-slide-in-left {
    animation: slideInLeft 0.3s ease-out;
  }

  /* ===== 배경 그라데이션 유틸리티 ===== */

  .gradient-blue {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }

  .gradient-purple {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  }

  /* 글래스모피즘 효과 */
  .glass {
    /* 기본 fallback 배경 */
    background: rgba(255, 255, 255, 0.8);
    border: 1px solid rgba(255, 255, 255, 0.3);

    /* 지원하는 브라우저에서만 글래스 효과 적용 */
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);

    /* backdrop-filter를 지원하는 브라우저에서만 반투명 배경 적용 */
    @supports (backdrop-filter: blur(10px)) or (-webkit-backdrop-filter: blur(10px)) {
      background: rgba(255, 255, 255, 0.1);
    }
  }

  /* 차트 전용 색상 클래스들 */

  .chart-primary {
    @apply text-chart-primary;
  }

  .chart-success {
    @apply text-chart-success;
  }

  .chart-warning {
    @apply text-chart-warning;
  }

  .chart-danger {
    @apply text-chart-danger;
  }

  .chart-purple {
    @apply text-chart-purple;
  }

  .chart-cyan {
    @apply text-chart-cyan;
  }
}

/* =================================================================
    Recharts 커스터마이징
   ================================================================= */

.recharts-tooltip-wrapper {
  @apply z-50;
}

.recharts-default-tooltip {
  @apply !bg-white !border !border-gray-200 !rounded-lg !shadow-lg;
  @apply dark:!bg-gray-800 dark:!border-gray-600;
}

.recharts-cartesian-axis-tick-value {
  @apply !text-xs !fill-gray-500 dark:!fill-gray-400;
}

.recharts-cartesian-grid line {
  @apply !stroke-gray-200 dark:!stroke-gray-700;
}

/* =================================================================
    스크롤바 커스터마이징
   ================================================================= */

@supports (scrollbar-width: thin) {
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: rgb(163 163 163) transparent; /* gray-400 */
  }
  .scrollbar-hide {
    scrollbar-width: none; /* Firefox에서 완전 숨김 */
  }
}

/* Webkit 기반 브라우저 (Chrome, Safari, Edge) */
.scrollbar-thin::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}
.scrollbar-thin::-webkit-scrollbar-track {
  background: transparent;
}
.scrollbar-thin::-webkit-scrollbar-thumb {
  background-color: rgb(163 163 163); /* gray-400 */
  border-radius: 4px;
}
.scrollbar-thin::-webkit-scrollbar-thumb:hover {
  background-color: rgb(115 115 115); /* gray-500 */
}

/* 다크 모드 톤 보정 */
.dark .scrollbar-thin::-webkit-scrollbar-thumb {
  background-color: rgb(100 116 139); /* gray-500 */
}
.dark .scrollbar-thin::-webkit-scrollbar-thumb:hover {
  background-color: rgb(148 163 184); /* gray-400 ~ gray-300 톤업 */
}

/* 스크롤바 감추기(스크롤은 유지) */
.scrollbar-hide {
  -ms-overflow-style: none;
}
.scrollbar-hide::-webkit-scrollbar {
  display: none; /* Chrome/Safari */
}

/* =================================================================
    상태별 헬퍼 클래스
   ================================================================= */

.loading-skeleton {
  @apply animate-pulse bg-gray-200 dark:bg-gray-700 rounded;
}

.disabled-state {
  @apply opacity-50 cursor-not-allowed pointer-events-none;
}

/* =================================================================
    접근성
   ================================================================= */

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* =================================================================
    인쇄 최적화
   ================================================================= */

@media print {
  .no-print {
    display: none !important;
  }

  * {
    background: white !important;
    color: black !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }
}

/* =================================================================
    키프레임 애니메이션 정의
   ================================================================= */

@keyframes fadeIn {
  '0%': { opacity: '0' },
  '100%': { opacity: '1' },
}

@keyframes slideUp {
  '0%': { transform: 'translateY(10px)', opacity: '0' },
  '100%': { transform: 'translateY(0)', opacity: '1' },
}

@keyframes slideInRight {
  '0%': { transform: 'translateX(100%)', opacity: '0' },
  '100%': { transform: 'translateX(0)', opacity: '1' },
}

@keyframes slideInLeft {
  '0%': { transform: 'translateX(-100%)', opacity: '0' },
  '100%': { transform: 'translateX(0)', opacity: '1' },
}

/* 캐러셀 스타일 */
.slide {
  position: absolute;
  inset: 0;
  opacity: 0;
  transition: opacity 1s ease;
}
.slideActive {
  opacity: 1;
}
.slideImg {
  object-fit: cover;
}
.overlay {
  position: absolute;
  inset: 0;
  background: linear-gradient(rgba(30, 58, 138, 0.7), rgba(30, 58, 138, 0.7));
}

/* 사용자 “감소된 모션” 설정 존중 */
@media (prefers-reduced-motion: reduce) {
  .slide {
    transition: none;
  }
}

@layer utilities {
  .animate-slide-in-up {
    animation: slideInUp 0.3s ease-out forwards;
  }
}

@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
